<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>Swipe between layers</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7.3/leaflet.js"></script>
    <link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7.3/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>

    <style>
        .range {
            position: absolute;
            width: 100%;
        }

        .leaflet-top .leaflet-control-zoom {
            top: 20px;
        }
    </style>

    <div id='map'></div>
    <input id='range' class='range' type='range' min='0' max='1.0' step='any' />

    <script>
        var map = L.map('map');
        L.tileLayer('https://basemaps.linz.govt.nz/v1/tiles/aerial@pr-11/EPSG:3857/{z}/{x}/{y}.webp?api=c01eqf0nw0eycncak7sczd69g5s').addTo(map);

        var overlay = L.tileLayer('https://basemaps.linz.govt.nz/v1/tiles/aerial@pr-14/EPSG:3857/{z}/{x}/{y}.webp?api=c01eqf0nw0eycncak7sczd69g5s').addTo(map);
        var range = document.getElementById('range');

        var survey = [[[[-43.891, 172.2505], [-43.8971, 172.2505], [-43.8971, 172.2373], [-43.8951, 172.2372], [-43.8953, 172.2252], [-43.8738, 172.2253], [-43.8693, 172.2253], [-43.8691, 172.2375], [-43.8681, 172.2375], [-43.8681, 172.2506], [-43.8859, 172.2505], [-43.891, 172.2505]]], [[[-43.8719, 172.2505], [-43.8719, 172.2505], [-43.8719, 172.2505], [-43.8719, 172.2505], [-43.8719, 172.2505]]], [[[-43.8144, 172.2664], [-43.8144, 172.2664], [-43.8144, 172.2664], [-43.8144, 172.2664], [-43.8144, 172.2664]]], [[[-43.8295, 172.2659], [-43.8298, 172.2659], [-43.8296, 172.249], [-43.8261, 172.2493], [-43.826, 172.2387], [-43.8225, 172.2387], [-43.8178, 172.2388], [-43.8101, 172.239], [-43.8056, 172.2389], [-43.8025, 172.239], [-43.7986, 172.2392], [-43.7957, 172.2391], [-43.7917, 172.2391], [-43.7901, 172.2391], [-43.7902, 172.2526], [-43.7899, 172.2667], [-43.7921, 172.2666], [-43.7958, 172.2667], [-43.7995, 172.2666], [-43.8032, 172.2667], [-43.8077, 172.2667], [-43.8103, 172.2665], [-43.8179, 172.2663], [-43.8225, 172.2662], [-43.8278, 172.266], [-43.8295, 172.2659]]], [[[-43.7844, 172.3037], [-43.7867, 172.303], [-43.7829, 172.2742], [-43.7804, 172.2749], [-43.7735, 172.2767], [-43.7662, 172.2784], [-43.7632, 172.2795], [-43.7593, 172.2806], [-43.7569, 172.281], [-43.752, 172.2823], [-43.7489, 172.2831], [-43.7457, 172.2841], [-43.742, 172.2853], [-43.7392, 172.2864], [-43.7371, 172.2872], [-43.7393, 172.3021], [-43.741, 172.3141], [-43.741, 172.3212], [-43.741, 172.3246], [-43.7406, 172.3295], [-43.7406, 172.334], [-43.7406, 172.339], [-43.7406, 172.342], [-43.7528, 172.3426], [-43.7529, 172.335], [-43.7537, 172.3339], [-43.7552, 172.3318], [-43.7575, 172.3284], [-43.7598, 172.3252], [-43.7625, 172.3216], [-43.7652, 172.3177], [-43.7675, 172.3143], [-43.7699, 172.3109], [-43.7722, 172.3075], [-43.7735, 172.3058], [-43.7781, 172.3048], [-43.7814, 172.3043], [-43.7842, 172.3037], [-43.7844, 172.3037]]], [[[-43.6819, 172.5519], [-43.6836, 172.5428], [-43.683, 172.5425], [-43.6719, 172.5381], [-43.6555, 172.5321], [-43.6528, 172.5452], [-43.6503, 172.5585], [-43.6559, 172.5608], [-43.6689, 172.5659], [-43.6751, 172.5678], [-43.6772, 172.5584], [-43.6804, 172.5596], [-43.6819, 172.5519]]], [[[-43.5471, 172.3909], [-43.5471, 172.3909], [-43.5471, 172.3909], [-43.5471, 172.3909], [-43.5471, 172.3909]]], [[[-43.5401, 172.3914], [-43.5401, 172.3914], [-43.5401, 172.3914], [-43.5401, 172.3914], [-43.5401, 172.3914]]], [[[-43.6832, 172.2001], [-43.684, 172.1998], [-43.684, 172.1997], [-43.681, 172.1851], [-43.6785, 172.1724], [-43.6784, 172.1724], [-43.6661, 172.1769], [-43.6629, 172.1783], [-43.6598, 172.1794], [-43.6571, 172.1808], [-43.6486, 172.1835], [-43.6425, 172.1856], [-43.6408, 172.1862], [-43.644, 172.201], [-43.6443, 172.2025], [-43.6443, 172.2025], [-43.6443, 172.2025], [-43.6443, 172.2028], [-43.6466, 172.2138], [-43.6586, 172.2096], [-43.6616, 172.208], [-43.6629, 172.2099], [-43.665, 172.2132], [-43.6667, 172.2158], [-43.6681, 172.2177], [-43.6775, 172.2059], [-43.6756, 172.2031], [-43.6832, 172.2001]]], [[[-43.667, 172.4732], [-43.667, 172.4732], [-43.667, 172.4732], [-43.667, 172.4732], [-43.667, 172.4732]]], [[[-43.6654, 172.4791], [-43.6672, 172.4725], [-43.6607, 172.4691], [-43.661, 172.4666], [-43.662, 172.4615], [-43.6575, 172.4591], [-43.6588, 172.4582], [-43.6617, 172.4562], [-43.6601, 172.4515], [-43.6589, 172.4477], [-43.6497, 172.4222], [-43.6485, 172.4191], [-43.6454, 172.412], [-43.6444, 172.4085], [-43.6433, 172.4088], [-43.6433, 172.4082], [-43.6434, 172.408], [-43.6434, 172.4078], [-43.6437, 172.4078], [-43.6437, 172.4061], [-43.6414, 172.3999], [-43.6412, 172.3999], [-43.6401, 172.3999], [-43.6367, 172.4], [-43.6353, 172.4001], [-43.6349, 172.3899], [-43.6346, 172.3809], [-43.6345, 172.3773], [-43.6311, 172.3771], [-43.6309, 172.3695], [-43.6306, 172.3696], [-43.6303, 172.3658], [-43.6299, 172.3548], [-43.6275, 172.355], [-43.6262, 172.355], [-43.6245, 172.3551], [-43.6231, 172.3551], [-43.6226, 172.3441], [-43.6166, 172.345], [-43.6128, 172.3458], [-43.6115, 172.3457], [-43.6075, 172.3458], [-43.6035, 172.3463], [-43.5961, 172.3468], [-43.5929, 172.3469], [-43.5888, 172.3472], [-43.5411, 172.3523], [-43.5348, 172.3528], [-43.5318, 172.3531], [-43.5255, 172.3535], [-43.5218, 172.3537], [-43.5187, 172.3539], [-43.5122, 172.3545], [-43.5084, 172.3548], [-43.5061, 172.355], [-43.5062, 172.3635], [-43.5064, 172.3692], [-43.5062, 172.3692], [-43.5062, 172.3692], [-43.5068, 172.3803], [-43.5077, 172.3941], [-43.51, 172.394], [-43.5298, 172.3923], [-43.5346, 172.3921], [-43.5347, 172.392], [-43.5386, 172.3916], [-43.5408, 172.3913], [-43.545, 172.391], [-43.545, 172.391], [-43.545, 172.391], [-43.5455, 172.391], [-43.5539, 172.3904], [-43.5564, 172.3902], [-43.56, 172.3898], [-43.563, 172.3896], [-43.5668, 172.3895], [-43.5677, 172.3895], [-43.568, 172.3963], [-43.5656, 172.3964], [-43.5661, 172.4096], [-43.5668, 172.4232], [-43.572, 172.4233], [-43.5761, 172.423], [-43.5827, 172.4223], [-43.5864, 172.422], [-43.5883, 172.4219], [-43.6053, 172.4202], [-43.6067, 172.4201], [-43.6067, 172.4201], [-43.607, 172.4201], [-43.6239, 172.4186], [-43.6266, 172.4183], [-43.6308, 172.4182], [-43.6332, 172.4181], [-43.6341, 172.4179], [-43.6351, 172.4176], [-43.6359, 172.4198], [-43.6367, 172.4225], [-43.6425, 172.4412], [-43.645, 172.449], [-43.63, 172.4415], [-43.6172, 172.487], [-43.6168, 172.4884], [-43.6141, 172.498], [-43.6221, 172.5018], [-43.621, 172.5065], [-43.6274, 172.5099], [-43.6265, 172.5142], [-43.6263, 172.5151], [-43.6363, 172.5199], [-43.6452, 172.5243], [-43.6473, 172.5175], [-43.6478, 172.5154], [-43.6547, 172.5187], [-43.6574, 172.5085], [-43.6654, 172.4791]]], [[[-43.413, 172.0491], [-43.4162, 172.0491], [-43.4161, 172.0315], [-43.407, 172.0314], [-43.3882, 171.9995], [-43.3886, 171.9925], [-43.3758, 171.991], [-43.3758, 171.9964], [-43.3753, 171.9969], [-43.3721, 172.0003], [-43.3742, 172.0037], [-43.3705, 172.0075], [-43.3744, 172.014], [-43.3718, 172.0502], [-43.385, 172.0518], [-43.385, 172.0518], [-43.3851, 172.0501], [-43.3952, 172.0498], [-43.3996, 172.0579], [-43.4033, 172.0539], [-43.4052, 172.0574], [-43.4053, 172.0574], [-43.413, 172.0491], [-43.413, 172.0491]]], [[[-43.3947, 171.5414], [-43.397, 171.5412], [-43.3993, 171.5411], [-43.3993, 171.5261], [-43.3976, 171.5259], [-43.3949, 171.5251], [-43.3921, 171.5244], [-43.3888, 171.5239], [-43.3753, 171.5226], [-43.3719, 171.5223], [-43.3694, 171.5219], [-43.3661, 171.5217], [-43.3615, 171.5215], [-43.3585, 171.5214], [-43.357, 171.5216], [-43.3565, 171.5323], [-43.3564, 171.5372], [-43.3586, 171.5375], [-43.3617, 171.5378], [-43.3645, 171.5386], [-43.3678, 171.5393], [-43.372, 171.5395], [-43.3747, 171.5398], [-43.3781, 171.5397], [-43.3785, 171.5399], [-43.3813, 171.5405], [-43.385, 171.5407], [-43.3919, 171.5412], [-43.3945, 171.5414], [-43.3947, 171.5414]]], [[[-43.348, 171.9524], [-43.348, 171.9524], [-43.348, 171.9524], [-43.348, 171.9524], [-43.348, 171.9524]]], [[[-43.2218, 171.725], [-43.2225, 171.7248], [-43.2218, 171.7205], [-43.2205, 171.7122], [-43.2205, 171.712], [-43.2203, 171.7099], [-43.2178, 171.7105], [-43.2165, 171.7004], [-43.2145, 171.7008], [-43.2105, 171.7017], [-43.2054, 171.7026], [-43.2013, 171.7037], [-43.1993, 171.7038], [-43.1984, 171.704], [-43.1971, 171.7043], [-43.195, 171.7045], [-43.1922, 171.7053], [-43.1918, 171.7055], [-43.1895, 171.7055], [-43.1871, 171.7058], [-43.1882, 171.7162], [-43.1846, 171.7172], [-43.1833, 171.7172], [-43.1785, 171.7181], [-43.1799, 171.7341], [-43.1885, 171.7326], [-43.1895, 171.7324], [-43.1919, 171.732], [-43.1953, 171.7313], [-43.1986, 171.7307], [-43.205, 171.7292], [-43.2079, 171.7286], [-43.2141, 171.7274], [-43.2152, 171.727], [-43.2165, 171.7267], [-43.22, 171.7256], [-43.2218, 171.725]]], [[[-43.3274, 171.9375], [-43.3274, 171.9375], [-43.3274, 171.9375], [-43.3274, 171.9375], [-43.3274, 171.9375]]], [[[-43.3532, 171.9352], [-43.3532, 171.9352], [-43.3532, 171.9352], [-43.3532, 171.9352], [-43.3532, 171.9352]]], [[[-43.3523, 171.9487], [-43.3536, 171.9476], [-43.3486, 171.9372], [-43.3532, 171.9372], [-43.3531, 171.9193], [-43.3513, 171.9194], [-43.3512, 171.9195], [-43.351, 171.9194], [-43.3405, 171.9201], [-43.3398, 171.9187], [-43.3351, 171.9093], [-43.3324, 171.9023], [-43.3215, 171.9117], [-43.3253, 171.9199], [-43.3142, 171.9204], [-43.3142, 171.9376], [-43.3335, 171.9375], [-43.3376, 171.946], [-43.3392, 171.9498], [-43.3391, 171.9499], [-43.3424, 171.9573], [-43.3523, 171.9487]]], [[[-43.5194, 171.6695], [-43.5248, 171.6694], [-43.5249, 171.6543], [-43.5242, 171.6544], [-43.524, 171.648], [-43.5257, 171.6479], [-43.5255, 171.6315], [-43.5205, 171.6316], [-43.5198, 171.6255], [-43.5225, 171.6234], [-43.5167, 171.6092], [-43.5008, 171.6214], [-43.4952, 171.6253], [-43.4901, 171.6297], [-43.4901, 171.6296], [-43.4876, 171.6314], [-43.4877, 171.6317], [-43.4794, 171.6319], [-43.4794, 171.6323], [-43.4746, 171.6324], [-43.4746, 171.6429], [-43.4654, 171.6426], [-43.4657, 171.653], [-43.4549, 171.6532], [-43.4549, 171.6667], [-43.4598, 171.6666], [-43.4733, 171.6667], [-43.4789, 171.667], [-43.4909, 171.6671], [-43.4935, 171.6672], [-43.5129, 171.6668], [-43.513, 171.6696], [-43.5194, 171.6695]]], [[[-43.4885, 171.9859], [-43.4885, 171.9859], [-43.4885, 171.9859], [-43.4885, 171.9859], [-43.4885, 171.9859]]], [[[-43.4935, 171.9844], [-43.4948, 171.984], [-43.4927, 171.9711], [-43.4916, 171.9658], [-43.4903, 171.9575], [-43.49, 171.9558], [-43.489, 171.9498], [-43.4882, 171.9448], [-43.4876, 171.9411], [-43.4864, 171.9361], [-43.4859, 171.9319], [-43.4857, 171.9275], [-43.4856, 171.9266], [-43.4846, 171.9212], [-43.4839, 171.9169], [-43.4832, 171.9128], [-43.4826, 171.9088], [-43.482, 171.9053], [-43.4818, 171.904], [-43.4805, 171.8966], [-43.4802, 171.8953], [-43.4795, 171.892], [-43.4789, 171.8891], [-43.471, 171.8911], [-43.4703, 171.8856], [-43.4702, 171.8856], [-43.463, 171.8867], [-43.4599, 171.8856], [-43.4569, 171.8842], [-43.4542, 171.8829], [-43.4521, 171.8817], [-43.449, 171.8918], [-43.4476, 171.8969], [-43.449, 171.8977], [-43.4493, 171.8979], [-43.4523, 171.8997], [-43.4553, 171.901], [-43.4557, 171.9011], [-43.4587, 171.9026], [-43.461, 171.9038], [-43.4613, 171.9039], [-43.462, 171.906], [-43.4623, 171.9068], [-43.4626, 171.9091], [-43.4627, 171.9096], [-43.4632, 171.9133], [-43.4634, 171.9148], [-43.4637, 171.9175], [-43.464, 171.919], [-43.4651, 171.9261], [-43.4658, 171.9304], [-43.4659, 171.9315], [-43.4667, 171.9359], [-43.4673, 171.9389], [-43.4675, 171.9411], [-43.4678, 171.9433], [-43.4687, 171.9477], [-43.4699, 171.9566], [-43.4707, 171.9623], [-43.4713, 171.9656], [-43.4719, 171.9703], [-43.4726, 171.975], [-43.4732, 171.9798], [-43.4737, 171.9846], [-43.474, 171.9874], [-43.484, 171.9849], [-43.4841, 171.9872], [-43.4935, 171.9844]]], [[[-43.545, 171.9693], [-43.545, 171.9693], [-43.545, 171.9693], [-43.545, 171.9693], [-43.545, 171.9693]]], [[[-43.5388, 171.9764], [-43.5448, 171.9764], [-43.5448, 171.9729], [-43.5452, 171.9635], [-43.5452, 171.9583], [-43.5451, 171.9542], [-43.5451, 171.95], [-43.5451, 171.9443], [-43.5451, 171.9361], [-43.5364, 171.9365], [-43.5338, 171.9365], [-43.528, 171.9367], [-43.528, 171.9392], [-43.528, 171.9449], [-43.5279, 171.9632], [-43.5276, 171.9664], [-43.5278, 171.9763], [-43.5367, 171.9764], [-43.5388, 171.9764]]], [[[-43.5162, 172.0936], [-43.5162, 172.0936], [-43.5162, 172.0936], [-43.5162, 172.0936], [-43.5162, 172.0936]]], [[[-43.5143, 172.1446], [-43.5153, 172.1446], [-43.5236, 172.1445], [-43.5236, 172.1266], [-43.5215, 172.1266], [-43.5176, 172.1267], [-43.5165, 172.1268], [-43.5163, 172.1186], [-43.5162, 172.1074], [-43.5159, 172.1074], [-43.5159, 172.1074], [-43.5162, 172.0961], [-43.5164, 172.085], [-43.5164, 172.0796], [-43.5152, 172.0797], [-43.5151, 172.0695], [-43.509, 172.0698], [-43.509, 172.0703], [-43.508, 172.0705], [-43.5032, 172.0705], [-43.5001, 172.0705], [-43.5, 172.0707], [-43.4964, 172.0709], [-43.4929, 172.0711], [-43.4891, 172.071], [-43.4844, 172.0711], [-43.4826, 172.0711], [-43.4792, 172.0715], [-43.4763, 172.0717], [-43.4715, 172.0722], [-43.4683, 172.0722], [-43.4599, 172.0725], [-43.46, 172.0856], [-43.4602, 172.1042], [-43.4603, 172.1201], [-43.4607, 172.1342], [-43.4641, 172.1343], [-43.4666, 172.1339], [-43.4673, 172.1338], [-43.4676, 172.1454], [-43.4737, 172.1453], [-43.4763, 172.1453], [-43.4806, 172.1453], [-43.4807, 172.1455], [-43.4822, 172.1454], [-43.4847, 172.1455], [-43.4872, 172.1454], [-43.4874, 172.1482], [-43.4955, 172.1481], [-43.4954, 172.147], [-43.4952, 172.1449], [-43.4978, 172.145], [-43.5008, 172.1448], [-43.5033, 172.1447], [-43.5075, 172.1447], [-43.5107, 172.1448], [-43.5143, 172.1446]]]];

        
        function clip() {
            var nw = map.containerPointToLayerPoint([0, 0]),
                se = map.containerPointToLayerPoint(map.getSize()),
                clipX = nw.x + (se.x - nw.x) * range.value;

            overlay.getContainer().style.clip = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)';
        }

        range['oninput' in range ? 'oninput' : 'onchange'] = clip;
        map.on('move', clip);
        map.setView([-43.63586974, 172.49662497], 15);

        clip();
        
        L.multiPolygon(survey, { color: "#fff", weight: 3, opacity: 0.9, fillOpacity: 0}).addTo(map);

    </script>

</body>

</html>
